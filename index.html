<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>펭귄 서버 검색기</title>
  <meta name="description" content="펭귄 서버 검색기 (요리/재료/광물 · 차수 필터 · 즐겨찾기)" />

  <style>
    /* =========================
       테마 컬러(어두운 보라 계열)
       ========================= */
    :root{
      --bg1:#1a0b2e;      /* 전체 배경(아래쪽) */
      --bg2:#2b1055;      /* 전체 배경(위쪽) */
      --ink:#eef0f6;      /* 기본 텍스트 */
      --muted:#b9bfd1;    /* 서브 텍스트 */
      --card:#201136;     /* 카드 배경 */
      --line:#3b2a60;     /* 경계선 */
      --chip:#2a1949;     /* 칩 배경 */
      --accent:#5eead4;   /* 포인트(링크/버튼) */
      --primary1:#7a4ed2; /* 버튼 그라데이션 상단 */
      --primary2:#5a38a8; /* 버튼 그라데이션 하단 */
      --shadow:0 12px 28px rgba(0,0,0,.45), 0 2px 6px rgba(0,0,0,.3);
    }

    /* =========================
       글로벌 기본 스타일
       ========================= */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      color:var(--ink);
      font:16px/1.6 system-ui, -apple-system, "Segoe UI", Roboto,
           "Apple SD Gothic Neo","Noto Sans KR", Helvetica, Arial;
      background:
        radial-gradient(1200px 500px at 10% -10%, #3a236b 0%, transparent 55%),
        radial-gradient(900px 380px at 110% -30%, #5a2fb2 0%, transparent 60%),
        linear-gradient(180deg,var(--bg2),var(--bg1));
    }
    a{color:var(--accent);text-decoration:none}
    .container{max-width:1100px;margin:0 auto;padding:0 16px}

    /* =========================
       헤더(로고 + 서브타이틀)
       ========================= */
    header{
      position:relative;
      padding:32px 0 18px;
      border-bottom:1px solid rgba(255,255,255,.06);
      overflow:hidden;
    }
    .hero{display:flex;flex-direction:column;align-items:center;gap:12px;text-align:center}
    .logo{
      width:min(520px,80vw);
      filter:drop-shadow(0 10px 35px rgba(0,0,0,.45));
    }
    .subtitle{color:var(--muted);font-size:14px}
    /* 헤더 뒤쪽 은은한 빛 */
    .halo{
      position:absolute; inset:auto -20% -50% -20%;
      height:420px;
      background:
        radial-gradient(600px 220px at 50% 0%, rgba(122,78,210,.45), transparent 60%),
        radial-gradient(420px 160px at 10% 30%, rgba(94,234,212,.16), transparent 70%),
        radial-gradient(500px 200px at 90% 40%, rgba(117,151,222,.18), transparent 70%);
      filter:blur(18px);
      pointer-events:none;
    }

    /* =========================
       상단 고정 툴바(검색 + 필터 + 결과수 + 즐겨찾기 토글)
       ========================= */
    .toolbar{
      position:sticky; top:0; z-index:20;
      background:rgba(26,11,46,.55);
      backdrop-filter:blur(12px);
      border-bottom:1px solid rgba(255,255,255,.06);
      margin-bottom:16px; /* ← 카드와 겹치지 않도록 하단 여백 */
    }
    .bar{
      display:grid; gap:10px;
      grid-template-columns: 1fr auto auto auto auto; /* 검색창 + select*3 + 버튼/카운트 영역 */
      align-items:center;
      padding:12px 0;
    }
    @media (max-width:980px){ .bar{grid-template-columns:1fr 1fr 1fr; } }
    @media (max-width:560px){ .bar{grid-template-columns:1fr 1fr; } }

    /* 검색창(둥근 모양) */
    .search{
      display:flex; align-items:center; gap:10px;
      background:linear-gradient(180deg,#23123e,#1d1034);
      border:1px solid var(--line);
      border-radius:999px;
      padding:10px 14px;
      box-shadow:var(--shadow);
    }
    .search input{
      flex:1; border:0; background:transparent; outline:0; color:var(--ink);
    }

    /* 드롭다운/버튼 공통 */
    select,.btn{
      background:linear-gradient(180deg,#251446,#1e1237);
      border:1px solid var(--line);
      color:var(--ink);
      border-radius:999px;
      padding:10px 12px;
    }
    .btn{cursor:pointer}
    .btn.primary{
      background:linear-gradient(180deg,var(--primary1),var(--primary2));
      border-color:transparent; color:#fff; box-shadow:var(--shadow)
    }
    .count{color:var(--muted); font-size:14px; text-align:right}

    /* =========================
       본문(카드 그리드 + 페이지네이션)
       ========================= */
    main{padding:18px 0 28px}
    .grid{
      display:grid; gap:14px;
      grid-template-columns:repeat(4,minmax(0,1fr));
      margin-top:12px; /* 툴바와의 추가 간격 */
    }
    @media (max-width:1100px){ .grid{grid-template-columns:repeat(3,minmax(0,1fr));} }
    @media (max-width:820px){ .grid{grid-template-columns:repeat(2,minmax(0,1fr));} }
    @media (max-width:520px){ .grid{grid-template-columns:1fr;} }

    .card{
      position:relative;
      background:linear-gradient(180deg,#22133d,#1a0f30);
      border:1px solid var(--line);
      border-radius:22px;
      padding:14px;
      min-height:150px;
      box-shadow:var(--shadow);
      transition:transform .15s ease, box-shadow .15s ease;
    }
    .card:hover{ transform:translateY(-4px); box-shadow:0 16px 34px rgba(0,0,0,.55); }

    .name{font-weight:800; letter-spacing:-.02em; font-size:18px}
    .row{display:flex; gap:8px; flex-wrap:wrap; margin:6px 0}
    .chip{
      display:inline-flex; align-items:center; gap:6px;
      background:var(--chip);
      border:1px solid var(--line);
      color:var(--muted);
      padding:4px 10px; border-radius:999px; font-size:12px;
    }
    .desc{color:#dfe2f2; font-size:14px; margin-top:6px; white-space:pre-line}

    /* 카드 우상단 하트(즐겨찾기) */
    .card .fav{
      position:absolute; right:10px; top:10px;
      border:0; cursor:pointer;
      padding:6px 9px; border-radius:999px;
      background:linear-gradient(180deg,#271542,#1c1032);
      border:1px solid var(--line); color:#ff9dbb;
      box-shadow:var(--shadow);
    }
    .card .fav.active{ color:#fff; background:#ff5c8a; border-color:transparent }

    .pager{display:flex; gap:10px; justify-content:center; margin:18px 0 6px}
    .pager .btn{padding:8px 12px}

    /* 푸터 */
    footer{border-top:1px solid rgba(255,255,255,.06)}
    footer .container{display:flex; justify-content:space-between; align-items:center; gap:10px; padding:14px 0; color:var(--muted); flex-wrap:wrap}
  </style>
</head>
<body>
  <!-- 헤더: 로고 + 부제 -->
  <header>
    <div class="container hero">
      <!-- 같은 폴더에 penguin_logo.png 업로드 필요 -->
      <img class="logo" src="./penguin_logo.png" alt="펭귄 서버 로고" onerror="this.style.display='none'">
      <div class="subtitle">요리 · 재료 · 광물 검색 / 차수 필터 / 즐겨찾기 지원</div>
    </div>
    <div class="halo" aria-hidden></div>
  </header>

  <!-- 상단 고정 툴바: 검색 + 필터 + 정렬 + 즐겨찾기 토글 + 결과수 -->
  <div class="toolbar">
    <div class="container bar">
      <!-- 검색창 -->
      <div class="search">
        <span>🔎</span>
        <input id="q" placeholder="이름·설명·태그로 검색 (예: 화채, 포션, 다이아)">
      </div>
      <!-- 카테고리 필터 -->
      <select id="cat">
        <option value="">카테고리 전체</option>
        <option value="요리">요리</option>
        <option value="재료">재료</option>
        <option value="광물">광물</option>
      </select>
      <!-- 차수(등급) 필터 -->
      <select id="tier">
        <option value="">차수 전체</option>
        <option>기본</option>
        <option>0차</option>
        <option>1차</option>
        <option>2차</option>
        <option>3차</option>
        <option>4차</option>

      </select>
      <!-- 정렬 -->
      <select id="sort">
        <option value="name">이름순</option>
        <option value="recent">최근 추가순</option>
        <option value="cat">카테고리순</option>
      </select>
      <!-- 즐겨찾기만 보기 토글 -->
      <button class="btn" id="favOnlyBtn" title="즐겨찾기만 보기">★ 즐겨찾기</button>

      <!-- 결과 개수 -->
      <div class="count" id="count">–</div>
    </div>
  </div>

  <!-- 본문: 카드 그리드 + 페이지네이션 -->
  <main class="container">
    <div id="grid" class="grid"></div>
    <div class="pager" id="pager"></div>
  </main>

  <!-- 푸터 -->
  <footer>
    <div class="container">
      <div>© 2025 펭귄 서버 검색기 · GitHub Pages</div>
      <div><a href="#" id="share">현재 검색 공유</a></div>
    </div>
  </footer>

  <script>
    /* ============================================
       유틸 함수/상태: 검색 파라미터, 문자열 정규화 등
       ============================================ */
    const $ = s => document.querySelector(s);
    const $$ = s => Array.from(document.querySelectorAll(s));
    const norm = s => (s||'').toString().toLowerCase().replace(/\\s+/g,'').normalize('NFKD');

    // URL -> 상태
    function readParams(){
      const p = new URLSearchParams(location.search);
      return {
        q: p.get('q') || '',
        cat: p.get('cat') || '',
        tier: p.get('tier') || '',
        sort: p.get('sort') || 'name',
        fav: p.get('fav') === '1' ? 1 : 0,  // 즐겨찾기만 보기
        page: parseInt(p.get('page') || '1', 10)
      };
    }
    // 상태 -> URL
    function writeParams(state){
      const p = new URLSearchParams();
      if (state.q) p.set('q', state.q);
      if (state.cat) p.set('cat', state.cat);
      if (state.tier) p.set('tier', state.tier);
      if (state.sort && state.sort !== 'name') p.set('sort', state.sort);
      if (state.fav) p.set('fav','1');
      if (state.page > 1) p.set('page', String(state.page));
      history.replaceState(null, '', '?' + p.toString());
    }

    /* ============================================
       데이터: 차수(tier) 사용 · 도구/기타 없음 · 광물 포함
       필요 시 여기에 항목을 계속 추가하세요.
       ============================================ */
    const DATA = [
      // 기본 재료
      { id:'mat_milgagu', name:'밀가루', category:'재료', tier:'기본', desc:'밀 x 4', tags:['요리사','기본재료'], addedAt:'2025-01-15' },
      { id:'mat_sugar_powder', name:'슈가파우더', category:'재료', tier:'기본', desc:'설탕 x 9', tags:['요리사','기본재료'], addedAt:'2025-01-15' },
      { id:'mat_beet_box', name:'비트상자', category:'재료', tier:'기본', desc:'비트 x 4', tags:['요리사','기본재료'], addedAt:'2025-01-15' },
      { id:'mat_potato_box', name:'감자상자', category:'재료', tier:'기본', desc:'감자 x 9', tags:['요리사','기본재료'], addedAt:'2025-01-15' },
      { id:'mat_watermelon_juice', name:'수박 쥬스', category:'재료', tier:'기본', desc:'수박 x 4', tags:['요리사','기본재료'], addedAt:'2025-01-15' },

      // 0차
      { id:'t0_garlic_steak', name:'마늘 스테이크', category:'요리', tier:'0차', desc:'시세 50 · 재료: 마늘, 스테이크, 감자상자 2 · 경험치 3', tags:['요리사'], addedAt:'2025-01-15' },
      { id:'t0_kimchi', name:'배추 김치', category:'요리', tier:'0차', desc:'시세 78 · 재료: 배추, 고추, 밀가루 · 경험치 3', tags:['요리사'], addedAt:'2025-01-15' },
      { id:'t0_lemon_dango', name:'레몬 당고', category:'요리', tier:'0차', desc:'시세 48 · 재료: 레몬, 슈가파우더, 밀가루 · 경험치 3', tags:['요리사','디저트'], addedAt:'2025-01-15' },
      { id:'t0_potion_lowest', name:'최하급 포션', category:'요리', tier:'0차', desc:'체력 15% · 마나 4% · 쿨타임 30초 · 재료: 레몬, 마늘, 네더사마귀 상자 2 · 경험치 3', tags:['요리사','포션'], addedAt:'2025-01-15' },

      // 1차
      { id:'t1_strawberry_mochi', name:'딸기모찌', category:'요리', tier:'1차', desc:'시세 58 · 재료: 딸기, 슈가파우더, 밀가루 · 경험치 4', tags:['요리사','디저트'], addedAt:'2025-01-15' },
      { id:'t1_cucumber_salad', name:'오이무침', category:'요리', tier:'1차', desc:'시세 86 · 재료: 오이, 고추, 밀가루 · 경험치 4', tags:['요리사'], addedAt:'2025-01-15' },
      { id:'t1_salad', name:'샐러드', category:'요리', tier:'1차', desc:'시세 98 · 재료: 파프리카, 오이, 당근상자 2 · 경험치 4', tags:['요리사'], addedAt:'2025-01-15' },
      { id:'t1_jellyfish_cold', name:'해파리냉채', category:'요리', tier:'1차', desc:'시세 1420 · 재료: 1등급 해파리, 오이, 파프리카 · 경험치 15', tags:['요리사','해산물'], addedAt:'2025-01-15' },
      { id:'t1_potion_low', name:'하급 포션', category:'요리', tier:'1차', desc:'체력 20% · 마나 8% · 쿨타임 30초 · 재료: 딸기, 파프리카, 네더사마귀 상자 2 · 경험치 4', tags:['요리사','포션'], addedAt:'2025-01-15' },
      { id:'t1_strawberry_punch', name:'딸기 화채', category:'요리', tier:'1차', desc:'포화 1분 · 재료: 딸기, 수박쥬스, 시원한 얼음 · 경험치 5', tags:['요리사','화채'], addedAt:'2025-01-15' },
      { id:'t1_sweetpotato_salad', name:'고구마 샐러드', category:'요리', tier:'1차', desc:'시세 98 · 재료: 고구마, 오이, 당근상자 2 · 경험치 4', tags:['요리사'], addedAt:'2025-01-15' },

      // 2차
      { id:'t2_kkakdugi', name:'깍두기', category:'요리', tier:'2차', desc:'시세 100 · 재료: 무, 고추, 밀가루 · 경험치 5', tags:['요리사','김치'], addedAt:'2025-01-15' },
      { id:'t2_orange_pudding', name:'오렌지 푸딩', category:'요리', tier:'2차', desc:'시세 72 · 재료: 오렌지, 슈가파우더, 밀가루 · 경험치 5', tags:['요리사','디저트'], addedAt:'2025-01-15' },
      { id:'t2_summer_soup', name:'애호박 찌개', category:'요리', tier:'2차', desc:'시세 112 · 재료: 애호박, 대파, 감자상자 2 · 경험치 5', tags:['요리사','국물'], addedAt:'2025-01-15' },
      { id:'t2_gray_mullet_spicy', name:'숭어 매운탕', category:'요리', tier:'2차', desc:'시세 1420 · 재료: 1등급 숭어, 무, 대파 · 경험치 20', tags:['요리사','해산물'], addedAt:'2025-01-15' },
      { id:'t2_potion_base', name:'기본 포션', category:'요리', tier:'2차', desc:'체력 25% · 마나 12% · 쿨타임 30초 · 재료: 애호박, 오렌지, 네더사마귀 상자 2 · 경험치 5', tags:['요리사','포션'], addedAt:'2025-01-15' },
      { id:'t2_orange_punch', name:'오렌지 화채', category:'요리', tier:'2차', desc:'포화 2분 · 재료: 오렌지, 수박쥬스, 시원한 얼음 · 경험치 8', tags:['요리사','화채'], addedAt:'2025-01-15' },

      // 3차
      { id:'t3_broccoli_salad', name:'브로콜리 샐러드', category:'요리', tier:'3차', desc:'시세 142 · 재료: 브로콜리, 양배추, 비트상자 1 · 경험치 6', tags:['요리사'], addedAt:'2025-01-15' },
      { id:'t3_tomato_pasta', name:'토마토 파스타', category:'요리', tier:'3차', desc:'시세 130 · 재료: 토마토, 대파, 밀가루 · 경험치 6', tags:['요리사','면요리'], addedAt:'2025-01-15' },
      { id:'t3_peach_ice_tea', name:'복숭아 아이스티', category:'요리', tier:'3차', desc:'시세 80 · 재료: 복숭아, 비트상자, 슈가파우더 2 · 경험치 6', tags:['요리사','음료'], addedAt:'2025-01-15' },
      { id:'t3_shrimp_grill', name:'철판 새우', category:'요리', tier:'3차', desc:'시세 1610 · 재료: 1등급 새우, 브로콜리, 당근 상자 2 · 경험치 25', tags:['요리사','해산물'], addedAt:'2025-01-15' },
      { id:'t3_potion_mid', name:'중급 포션', category:'요리', tier:'3차', desc:'체력 30% · 마나 16% · 쿨타임 30초 · 재료: 복숭아, 토마토, 네더사마귀 상자 2 · 경험치 6', tags:['요리사','포션'], addedAt:'2025-01-15' },
      { id:'t3_peach_punch', name:'복숭아 화채', category:'요리', tier:'3차', desc:'포화 3분 · 재료: 복숭아, 수박쥬스, 시원한 얼음 · 경험치 12', tags:['요리사','화채'], addedAt:'2025-01-15' },

      // 4차
      { id:'t4_melon_bread', name:'메론빵', category:'요리', tier:'4차', desc:'시세 90 · 재료: 멜론, 슈가파우더, 밀가루 · 경험치 7', tags:['요리사','빵'], addedAt:'2025-01-15' },
      { id:'t4_gimbap', name:'김밥', category:'요리', tier:'4차', desc:'시세 166 · 재료: 쌀, 양파, 비트 상자 1 · 경험치 7', tags:['요리사','한식'], addedAt:'2025-01-15' },
      { id:'t4_bibimbap', name:'비빔밥', category:'요리', tier:'4차', desc:'시세 166 · 재료: 쌀, 상추, 당근 상자 2 · 경험치 7', tags:['요리사','한식'], addedAt:'2025-01-15' },
      { id:'t4_fish_chip', name:'생선 튀김', category:'요리', tier:'4차', desc:'시세 1610 · 재료: 1등급 도다리, 양파, 밀가루 · 경험치 30', tags:['요리사','해산물'], addedAt:'2025-01-15' },
      { id:'t4_potion_high', name:'상급 포션', category:'요리', tier:'4차', desc:'체력 35% · 마나 20% · 쿨타임 30초 · 재료: 멜론, 상추, 네더사마귀 상자 2 · 경험치 7', tags:['요리사','포션'], addedAt:'2025-01-15' },
      { id:'t4_melon_punch', name:'메론 화채', category:'요리', tier:'4차', desc:'포화 4분 · 재료: 멜론, 수박쥬스, 시원한 얼음 · 경험치 16', tags:['요리사','화채'], addedAt:'2025-01-15' },

      // 광물(단일/블록 상점가)
      { id:'ore_diamond', name:'다이아', category:'광물', tier:'기본', desc:'단일 상점가 72 · 블록 상점가 720', tags:['광물'], addedAt:'2025-01-15' },
      { id:'ore_gold', name:'금', category:'광물', tier:'기본', desc:'단일 상점가 15 · 블록 상점가 150', tags:['광물'], addedAt:'2025-01-15' },
      { id:'ore_iron', name:'철', category:'광물', tier:'기본', desc:'단일 상점가 10 · 블록 상점가 100', tags:['광물'], addedAt:'2025-01-15' },
      { id:'ore_copper', name:'구리', category:'광물', tier:'기본', desc:'단일 상점가 4 · 블록 상점가 40', tags:['광물'], addedAt:'2025-01-15' },
      { id:'ore_lapis', name:'청금석', category:'광물', tier:'기본', desc:'단일 상점가 6 · 블록 상점가 60', tags:['광물'], addedAt:'2025-01-15' },
      { id:'ore_redstone', name:'레드스톤', category:'광물', tier:'기본', desc:'단일 상점가 6 · 블록 상점가 60', tags:['광물'], addedAt:'2025-01-15' },
      { id:'ore_emerald', name:'에메랄드', category:'광물', tier:'기본', desc:'단일 상점가 120 · 블록 상점가 1200', tags:['광물'], addedAt:'2025-01-15' },
      { id:'ore_quartz', name:'석영', category:'광물', tier:'기본', desc:'단일 상점가 8 · 블록 상점가 없음', tags:['광물'], addedAt:'2025-01-15' },
      { id:'ore_netherite', name:'네더라이트', category:'광물', tier:'기본', desc:'단일 상점가 200 · 블록 상점가 2000', tags:['광물'], addedAt:'2025-01-15' }
    ];

    /* ============================================
       즐겨찾기 저장(로컬스토리지)
       ============================================ */
    const favKey = 'penguin-favs-v1';
    const favs = new Set(JSON.parse(localStorage.getItem(favKey) || '[]'));
    const saveFavs = () => localStorage.setItem(favKey, JSON.stringify([...favs]));

    /* ============================================
       검색/정렬/필터 로직
       ============================================ */
    function match(item, q){
      if (!q) return true;
      const nq = norm(q);
      return [item.name, item.desc, ...(item.tags||[])].some(v => norm(v).includes(nq));
    }
    function apply(list, st){
      let out = list.filter(it => match(it, st.q));
      if (st.cat)  out = out.filter(it => it.category === st.cat);
      if (st.tier) out = out.filter(it => it.tier === st.tier);
      if (st.fav)  out = out.filter(it => favs.has(it.id)); // 즐겨찾기만 보기
      switch(st.sort){
        case 'recent': out.sort((a,b)=> new Date(b.addedAt) - new Date(a.addedAt)); break;
        case 'cat':    out.sort((a,b)=> (a.category||'').localeCompare(b.category||'','ko') || a.name.localeCompare(b.name,'ko')); break;
        default:       out.sort((a,b)=> a.name.localeCompare(b.name,'ko'));
      }
      return out;
    }

    /* ============================================
       카드 생성(하트 토글 포함)
       ============================================ */
   function card(it){
  const el = document.createElement('div');
  el.className = 'card';
  el.innerHTML = `
    <!-- 즐겨찾기 하트 버튼 -->
    <button class="fav ${favs.has(it.id)?'active':''}" aria-label="즐겨찾기" data-id="${it.id}">
      ${favs.has(it.id)?'♥':'♡'}
    </button>

    <!-- 카드 이름 및 정보 -->
    <div class="name">${it.name}</div>
    <div class="row">
      <span class="chip">${it.category}</span>
      <span class="chip">차수: ${it.tier}</span>
    </div>
    <div class="desc">${it.desc || ''}</div>
  `;

  // 하트 버튼 클릭 시 즐겨찾기 토글
  el.querySelector('.fav').addEventListener('click', (e)=>{
    const id = e.currentTarget.getAttribute('data-id');

    // 이미 즐겨찾기 되어 있으면 해제, 아니면 추가
    if (favs.has(id)) {
      favs.delete(id);
    } else {
      favs.add(id);
    }

    // localStorage에 저장
    saveFavs();

    // UI 다시 렌더링
    render();
  });


     </script>
</body>
</html>

  return el;
}
